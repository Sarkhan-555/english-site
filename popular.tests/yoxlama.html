<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Level Assessment</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #1E293B;
            --primary-light: #334155;
            --secondary-color: #0EA5E9;
            --secondary-light: #38BDF8;
            --accent-color: #F97316;
            --light-color: #F8FAFC;
            --dark-color: #0F172A;
            --success-color: #10B981;
            --error-color: #EF4444;
            --warning-color: #F59E0B;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light-color);
            color: var(--dark-color);
            line-height: 1.7;
        }
        
        .container {
            max-width: 900px;
            margin: 30px auto;
            padding: 30px;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }
        
        h1, h2, h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        h1 {
            font-size: 2.2rem;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
        }
        
        .intro {
            margin-bottom: 30px;
            text-align: center;
            font-size: 1.1rem;
            color: var(--primary-light);
        }
        
        .timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(14, 165, 233, 0.3);
            font-weight: 600;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 100;
            animation: slideInRight 0.5s ease-out;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .timer i {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .question-container {
            display: none;
            margin-bottom: 30px;
            transform-origin: center;
            animation: zoomIn 0.5s ease-out;
        }
        
        @keyframes zoomIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .question-number {
            display: inline-block;
            background-color: var(--secondary-color);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            text-align: center;
            line-height: 32px;
            margin-right: 10px;
            font-weight: 600;
        }
        
        .question {
            font-weight: 600;
            font-size: 1.2rem;
            margin-bottom: 20px;
            padding: 15px;
            background-color: var(--light-color);
            border-radius: 10px;
            border-left: 4px solid var(--secondary-color);
            display: flex;
            align-items: center;
        }
        
        .options {
            margin-bottom: 20px;
            display: grid;
            gap: 12px;
        }
        
        .option {
            display: flex;
            align-items: center;
            padding: 15px;
            background-color: #fff;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.05rem;
        }
        
        .option:hover {
            background-color: #f8fafc;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-color: var(--secondary-light);
        }
        
        .option-letter {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background-color: #e2e8f0;
            border-radius: 50%;
            margin-right: 12px;
            font-weight: 600;
            flex-shrink: 0;
            transition: all 0.3s;
        }
        
        .option:hover .option-letter {
            background-color: var(--secondary-light);
            color: white;
        }
        
        .option.selected {
            background-color: rgba(14, 165, 233, 0.1);
            border-color: var(--secondary-color);
        }
        
        .option.selected .option-letter {
            background-color: var(--secondary-color);
            color: white;
        }
        
        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            resize: vertical;
            min-height: 150px;
            font-size: 1rem;
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2);
        }
        
        .reading-passage {
            background-color: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 4px solid var(--secondary-color);
            font-size: 1.05rem;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 25px;
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            margin: 10px 5px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.6s;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(14, 165, 233, 0.3);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .results {
            display: none;
            padding: 30px;
            background-color: white;
            border-radius: 16px;
            text-align: center;
            animation: fadeInUp 1s;
        }
        
        @keyframes fadeInUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .level-badge-container {
            position: relative;
            margin: 40px 0;
            height: 140px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .level-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 140px;
            height: 140px;
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            border-radius: 50%;
            font-size: 3rem;
            font-weight: bold;
            box-shadow: 0 10px 25px rgba(14, 165, 233, 0.3);
            position: relative;
            animation: badgePop 0.7s cubic-bezier(0.17, 0.67, 0.83, 0.67);
        }
        
        @keyframes badgePop {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .badge-glow {
            position: absolute;
            width: 160px;
            height: 160px;
            border-radius: 50%;
            background: transparent;
            border: 5px solid rgba(14, 165, 233, 0.3);
            animation: glow 2s infinite;
        }
        
        @keyframes glow {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(1.3); opacity: 0; }
        }
        
        .level-description {
            margin: 30px 0;
            padding: 20px;
            background-color: #f8fafc;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: left;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .level-description::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--secondary-color), var(--primary-color));
            z-index: -1;
        }
        
        .answer-review {
            text-align: left;
            margin-top: 40px;
        }
        
        .answer-item {
            margin-bottom: 25px;
            padding: 20px;
            background-color: #f8fafc;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.03);
            transition: all 0.3s;
            border-left: 5px solid #e2e8f0;
        }
        
        .answer-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
        }
        
        .correct {
            border-left: 5px solid var(--success-color);
        }
        
        .incorrect {
            border-left: 5px solid var(--error-color);
        }
        
        .progress-container {
            position: relative;
            width: 100%;
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 20px;
            margin: 30px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            width: 0%;
            transition: width 0.5s cubic-bezier(0.22, 1, 0.36, 1);
            border-radius: 20px;
        }
        
        .welcome-screen {
            text-align: center;
            padding: 40px 20px;
            animation: fadeInUp 0.8s;
        }
        
        .welcome-animation {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 0 auto 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .welcome-icon {
            font-size: 70px;
            color: var(--secondary-color);
            animation: float 4s ease-in-out infinite;
            position: relative;
            z-index: 2;
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0px); }
        }
        
        .welcome-circle {
            position: absolute;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.1), rgba(30, 41, 59, 0.1));
            animation: pulse-grow 4s infinite;
        }
        
        @keyframes pulse-grow {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.1); }
            100% { transform: scale(0.8); }
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }
        
        .step {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background-color: #e2e8f0;
            color: var(--primary-light);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 8px;
            font-weight: 600;
            position: relative;
        }
        
        .step.active {
            background-color: var(--secondary-color);
            color: white;
            box-shadow: 0 0 0 5px rgba(14, 165, 233, 0.2);
        }
        
        .step.completed {
            background-color: var(--success-color);
            color: white;
        }
        
        .step::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 100%;
            transform: translateY(-50%);
            width: 16px;
            height: 2px;
            background-color: #e2e8f0;
        }
        
        .step:last-child::after {
            display: none;
        }
        
        .step.completed::after {
            background-color: var(--success-color);
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 15px;
                padding: 20px;
            }
            
            .timer {
                top: 10px;
                right: 10px;
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .question {
                font-size: 1.1rem;
            }
            
            .option {
                padding: 12px;
            }
            
            .level-badge {
                width: 120px;
                height: 120px;
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="welcome-screen" id="welcome-screen">
            <div class="welcome-animation">
                <div class="welcome-circle"></div>
                <i class="fas fa-language welcome-icon"></i>
            </div>
            <h1>English Level Assessment</h1>
            <p class="intro">Discover your English proficiency level from A1 to C2 with our interactive assessment. You'll have 30 minutes to complete 6 questions covering different language skills.</p>
            <button class="btn" id="start-test">
                <i class="fas fa-play"></i> Start Assessment
            </button>
        </div>

        <div id="test-container" style="display: none;">
            <h1>English Level Assessment</h1>
            <div class="timer" id="timer">
                <i class="fas fa-clock"></i> <span>30:00</span>
            </div>
            
            <div class="step-indicator" id="step-indicator">
                <div class="step active" data-question="1">1</div>
                <div class="step" data-question="2">2</div>
                <div class="step" data-question="3">3</div>
                <div class="step" data-question="4">4</div>
                <div class="step" data-question="5">5</div>
                <div class="step" data-question="6">6</div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            
            <!-- Question 1: Multiple choice grammar -->
            <div class="question-container" id="q1">
                <div class="question">
                    <span class="question-number">1</span> Choose the correct form to complete the sentence: "If I _____ more time, I would travel more."
                </div>
                <div class="options">
                    <div class="option" onclick="selectOption(this, 1)" data-value="a">
                        <span class="option-letter">A</span> have
                    </div>
                    <div class="option" onclick="selectOption(this, 1)" data-value="b">
                        <span class="option-letter">B</span> had
                    </div>
                    <div class="option" onclick="selectOption(this, 1)" data-value="c">
                        <span class="option-letter">C</span> would have
                    </div>
                    <div class="option" onclick="selectOption(this, 1)" data-value="d">
                        <span class="option-letter">D</span> am having
                    </div>
                </div>
            </div>
            
            <!-- Question 2: Vocabulary -->
            <div class="question-container" id="q2">
                <div class="question">
                    <span class="question-number">2</span> Which word is closest in meaning to "ubiquitous"?
                </div>
                <div class="options">
                    <div class="option" onclick="selectOption(this, 2)" data-value="a">
                        <span class="option-letter">A</span> Rare
                    </div>
                    <div class="option" onclick="selectOption(this, 2)" data-value="b">
                        <span class="option-letter">B</span> Widespread
                    </div>
                    <div class="option" onclick="selectOption(this, 2)" data-value="c">
                        <span class="option-letter">C</span> Unique
                    </div>
                    <div class="option" onclick="selectOption(this, 2)" data-value="d">
                        <span class="option-letter">D</span> Colorful
                    </div>
                </div>
            </div>
            
            <!-- Question 3: Reading comprehension -->
            <div class="question-container" id="q3">
                <div class="question">
                    <span class="question-number">3</span> Read the passage and answer the question:
                </div>
                <div class="reading-passage">
                    The impact of artificial intelligence on modern society cannot be overstated. While advocates highlight the potential for AI to solve complex problems and enhance efficiency across various sectors, critics raise concerns about privacy, surveillance, and job displacement. The debate extends beyond practical implications to philosophical questions about human uniqueness and the nature of consciousness.
                </div>
                <div class="question">What is the main theme of this passage?</div>
                <div class="options">
                    <div class="option" onclick="selectOption(this, 3)" data-value="a">
                        <span class="option-letter">A</span> The technical aspects of AI development
                    </div>
                    <div class="option" onclick="selectOption(this, 3)" data-value="b">
                        <span class="option-letter">B</span> The benefits of AI in the workplace
                    </div>
                    <div class="option" onclick="selectOption(this, 3)" data-value="c">
                        <span class="option-letter">C</span> The contrasting perspectives on AI's societal impact
                    </div>
                    <div class="option" onclick="selectOption(this, 3)" data-value="d">
                        <span class="option-letter">D</span> The history of artificial intelligence
                    </div>
                </div>
            </div>
            
            <!-- Question 4: Open-ended writing -->
            <div class="question-container" id="q4">
                <div class="question">
                    <span class="question-number">4</span> Write 3-5 sentences describing your ideal vacation destination and explain why you would like to visit it.
                </div>
                <textarea id="q4-answer" placeholder="Write your answer here..."></textarea>
            </div>
            
            <!-- Question 5: Idioms/Expressions -->
            <div class="question-container" id="q5">
                <div class="question">
                    <span class="question-number">5</span> What does the expression "to beat around the bush" mean?
                </div>
                <div class="options">
                    <div class="option" onclick="selectOption(this, 5)" data-value="a">
                        <span class="option-letter">A</span> To win a difficult competition
                    </div>
                    <div class="option" onclick="selectOption(this, 5)" data-value="b">
                        <span class="option-letter">B</span> To avoid addressing a subject directly
                    </div>
                    <div class="option" onclick="selectOption(this, 5)" data-value="c">
                        <span class="option-letter">C</span> To search thoroughly for something
                    </div>
                    <div class="option" onclick="selectOption(this, 5)" data-value="d">
                        <span class="option-letter">D</span> To destroy natural habitats
                    </div>
                </div>
            </div>
            
            <!-- Question 6: Advanced grammar -->
            <div class="question-container" id="q6">
                <div class="question">
                    <span class="question-number">6</span> Complete the sentence with the correct form: "By the time we arrive, they _____ for three hours."
                </div>
                <div class="options">
                    <div class="option" onclick="selectOption(this, 6)" data-value="a">
                        <span class="option-letter">A</span> will wait
                    </div>
                    <div class="option" onclick="selectOption(this, 6)" data-value="b">
                        <span class="option-letter">B</span> will be waiting
                    </div>
                    <div class="option" onclick="selectOption(this, 6)" data-value="c">
                        <span class="option-letter">C</span> will have waited
                    </div>
                    <div class="option" onclick="selectOption(this, 6)" data-value="d">
                        <span class="option-letter">D</span> will have been waiting
                    </div>
                </div>
            </div>
            
            <div class="btn-container">
                <button class="btn" id="prev-btn" style="display: none;">
                    <i class="fas fa-arrow-left"></i> Previous
                </button>
                <button class="btn" id="next-btn">
                    Next <i class="fas fa-arrow-right"></i>
                </button>
                <button class="btn" id="submit-btn" style="display: none;">
                    <i class="fas fa-check-circle"></i> Submit Test
                </button>
            </div>
        </div>
        
        <div class="results" id="results">
            <h2>Your Assessment Results</h2>
            
            <div class="level-badge-container">
                <div class="badge-glow"></div>
                <div class="level-badge" id="level-badge">B1</div>
            </div>
            
            <div class="level-description" id="level-description"></div>
            
            <h3>Your Answers Review</h3>
            <div class="answer-review" id="answer-review"></div>
            
            <button class="btn" id="retake-btn">
                <i class="fas fa-redo-alt"></i> Retake Test
            </button>
        </div>
    </div>

    <script>
        // Global variables
        let currentQuestion = 1;
        let answers = {
            1: null,
            2: null,
            3: null,
            4: '',
            5: null,
            6: null
        };
        let timer;
        let timeLeft = 30 * 60; // 30 minutes in seconds
        
        // Correct answers
        const correctAnswers = {
            1: 'b',
            2: 'b',
            3: 'c',
            5: 'b',
            6: 'd'
        };
        
        // Level descriptions
        const levelDescriptions = {
            'A1': 'Beginner level. You can understand and use familiar everyday expressions and very basic phrases. You can introduce yourself and others and can ask and answer questions about personal details.',
            'A2': 'Elementary level. You can understand sentences and frequently used expressions related to areas of most immediate relevance. You can communicate in simple and routine tasks.',
            'B1': 'Intermediate level. You can deal with most situations likely to arise while traveling in an area where the language is spoken. You can produce simple connected text on topics that are familiar or of personal interest.',
            'B2': 'Upper Intermediate level. You can interact with a degree of fluency and spontaneity that makes regular interaction with native speakers quite possible. You can present clear, detailed descriptions on a wide range of subjects.',
            'C1': 'Advanced level. You can express ideas fluently and spontaneously without much obvious searching for expressions. You can use language flexibly and effectively for social, academic and professional purposes.',
            'C2': 'Proficiency level. You can understand with ease virtually everything heard or read. You can summarize information from different spoken and written sources, reconstructing arguments and accounts in a coherent presentation.'
        };
        
        // DOM elements
        const welcomeScreen = document.getElementById('welcome-screen');
        const testContainer = document.getElementById('test-container');
        const startTestBtn = document.getElementById('start-test');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        const timerElement = document.getElementById('timer').querySelector('span');
        const resultsElement = document.getElementById('results');
        const levelBadge = document.getElementById('level-badge');
        const levelDescription = document.getElementById('level-description');
        const answerReview = document.getElementById('answer-review');
        const retakeBtn = document.getElementById('retake-btn');
        const progressBar = document.getElementById('progress-bar');
        const stepIndicator = document.getElementById('step-indicator');
        
        // Start the test
        startTestBtn.addEventListener('click', function() {
            welcomeScreen.style.display = 'none';
            testContainer.style.display = 'block';
            showQuestion(1);
            startTimer();
            updateProgressBar();
        });
        
        // Timer function
        function startTimer() {
            timer = setInterval(function() {
                timeLeft--;
                
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                
                timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 300) { // 5 minutes remaining
                    timerElement.parentElement.style.background = 'linear-gradient(135deg, #EF4444, #B91C1C)';
                    timerElement.parentElement.style.animation = 'pulse 1s infinite';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    submitTest();
                }
            }, 1000);
        }
        
        // Show a specific question
        function showQuestion(questionNumber) {
            // Hide all questions
            const questions = document.querySelectorAll('.question-container');
            questions.forEach(q => q.style.display = 'none');
            
            // Show the current question
            const currentQuestionElement = document.getElementById(`q${questionNumber}`);
            currentQuestionElement.style.display = 'block';
            
            // Update button visibility
            prevBtn.style.display = questionNumber === 1 ? 'none' : 'block';
            nextBtn.style.display = questionNumber === 6 ? 'none' : 'block';
            submitBtn.style.display = questionNumber === 6 ? 'block' : 'none';
            
            // Update current question
            currentQuestion = questionNumber;
            updateProgressBar();
            updateStepIndicator();
        }
        
        // Update step indicator
        function updateStepIndicator() {
            const steps = stepIndicator.querySelectorAll('.step');
            steps.forEach(step => {
                const stepNumber = parseInt(step.getAttribute('data-question'));
                step.classList.remove('active', 'completed');
                
                if (stepNumber === currentQuestion) {
                    step.classList.add('active');
                } else if (stepNumber < currentQuestion) {
                    step.classList.add('completed');
                }
            });
        }
        
        // Select an option for multiple choice questions
        function selectOption(element, questionNumber) {
            // Remove selection from all options in this question
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            
                        // Add selection to clicked option
                        element.classList.add('selected');
            
            // Save the answer
            answers[questionNumber] = element.getAttribute('data-value');
        }

        // Update progress bar
        function updateProgressBar() {
            const progress = (currentQuestion / 6) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Next button click handler
        nextBtn.addEventListener('click', function() {
            // Save text answer if it's question 4
            if (currentQuestion === 4) {
                answers[4] = document.getElementById('q4-answer').value;
            }
            
            showQuestion(currentQuestion + 1);
        });

        // Previous button click handler
        prevBtn.addEventListener('click', function() {
            showQuestion(currentQuestion - 1);
        });

        // Submit test
        submitBtn.addEventListener('click', function() {
            // Save text answer for question 4 before submitting
            answers[4] = document.getElementById('q4-answer').value;
            submitTest();
        });

        function submitTest() {
            clearInterval(timer);
            testContainer.style.display = 'none';
            resultsElement.style.display = 'block';
            
            // Calculate score
            let score = 0;
            let totalQuestions = 0;
            
            for (const question in answers) {
                if (question !== '4') { // Skip the writing question for scoring
                    totalQuestions++;
                    if (answers[question] === correctAnswers[question]) {
                        score++;
                    }
                }
            }
            
            // Determine level based on score
            let level;
            const percentage = (score / totalQuestions) * 100;
            
            if (percentage < 20) {
                level = 'A1';
            } else if (percentage < 40) {
                level = 'A2';
            } else if (percentage < 60) {
                level = 'B1';
            } else if (percentage < 80) {
                level = 'B2';
            } else if (percentage < 95) {
                level = 'C1';
            } else {
                level = 'C2';
            }
            
            // Display results
            levelBadge.textContent = level;
            levelDescription.textContent = levelDescriptions[level];
            
            // Generate answer review
            answerReview.innerHTML = '';
            for (let i = 1; i <= 6; i++) {
                if (i === 4) continue; // Skip writing question in review
                
                const answerItem = document.createElement('div');
                answerItem.className = 'answer-item';
                
                const questionElement = document.createElement('div');
                questionElement.className = 'question';
                questionElement.innerHTML = `<span class="question-number">${i}</span> ${document.querySelector(`#q${i} .question`).textContent.trim()}`;
                
                const userAnswer = document.createElement('p');
                userAnswer.innerHTML = `<strong>Your answer:</strong> ${answers[i] ? answers[i].toUpperCase() : 'No answer'}`;
                
                const correctAnswer = document.createElement('p');
                correctAnswer.innerHTML = `<strong>Correct answer:</strong> ${correctAnswers[i].toUpperCase()}`;
                
                answerItem.appendChild(questionElement);
                answerItem.appendChild(userAnswer);
                answerItem.appendChild(correctAnswer);
                
                if (answers[i] === correctAnswers[i]) {
                    answerItem.classList.add('correct');
                } else {
                    answerItem.classList.add('incorrect');
                }
                
                answerReview.appendChild(answerItem);
            }
            
            // Add writing question to review
            const writingItem = document.createElement('div');
            writingItem.className = 'answer-item';
            
            const writingQuestion = document.createElement('div');
            writingQuestion.className = 'question';
            writingQuestion.innerHTML = `<span class="question-number">4</span> ${document.querySelector('#q4 .question').textContent.trim()}`;
            
            const writingAnswer = document.createElement('p');
            writingAnswer.innerHTML = `<strong>Your answer:</strong><br>${answers[4] || 'No answer'}`;
            
            writingItem.appendChild(writingQuestion);
            writingItem.appendChild(writingAnswer);
            answerReview.appendChild(writingItem);
        }

        // Retake test
        retakeBtn.addEventListener('click', function() {
            // Reset all answers
            answers = {
                1: null,
                2: null,
                3: null,
                4: '',
                5: null,
                6: null
            };
            
            // Clear selections
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Clear textarea
            document.getElementById('q4-answer').value = '';
            
            // Reset timer
            clearInterval(timer);
            timeLeft = 30 * 60;
            timerElement.textContent = '30:00';
            timerElement.parentElement.style.background = 'linear-gradient(135deg, var(--secondary-color), var(--primary-color))';
            timerElement.parentElement.style.animation = 'none';
            
            // Show welcome screen
            resultsElement.style.display = 'none';
            welcomeScreen.style.display = 'block';
        });
    </script>
</body>
</html>